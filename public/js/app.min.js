/* 
Version 1.0.0
Copyright (c) 2018 pilisir.tw@gmail.com
Under MIT Licesne, please go to "https://en.wikipedia.org/wiki/MIT_License" to check license terms.
 */
const messages={zh_TW:zhTW,zh_CN:zhCN,en_US:enUS},i18n=new VueI18n({locale:'zh_TW',messages}),userImageDefaultSrc='public/image/user.png',winnerImageDefaultSrc='public/image/crown.png',wiwAuthor={name:'Jason Jian',email:'pilisir.tw@gmail.com',github:'https://github.com/pilisir/whoiswinner'};let navbarVue,mainLayoutVue,hiddenVue,tableWidthDefaultSize='wiw-td-size',tableColumnPosition='position-relative',tableColumnClass=`${tableColumnPosition} ${tableWidthDefaultSize}`,modalActive=!1,themeVariant={navbar:'dark',navbarType:'dark',normal:'secondary',outline:'outline-secondary'},themeObjectArray=[{label:'theme.label.secondary',variant:{navbar:'dark',navbarType:'dark',normal:'secondary',outline:'outline-secondary'}},{label:'theme.label.primary',variant:{navbar:'primary',navbarType:'dark',normal:'primary',outline:'outline-primary'}},{label:'theme.label.success',variant:{navbar:'success',navbarType:'dark',normal:'success',outline:'outline-success'}},{label:'theme.label.info',variant:{navbar:'info',navbarType:'dark',normal:'info',outline:'outline-info'}},{label:'theme.label.warning',variant:{navbar:'warning',navbarType:'light',normal:'warning',outline:'outline-warning'}},{label:'theme.label.danger',variant:{navbar:'danger',navbarType:'dark',normal:'danger',outline:'outline-danger'}}],langObjectArray=[{label:'\u7E41\u9AD4\u4E2D\u6587',key:'zh_TW'},{label:'\u7B80\u4F53\u4E2D\u6587',key:'zh_CN'},{label:'English',key:'en_US'}];document.addEventListener('DOMContentLoaded',function(){initApp(),initComponent()});function initComponent(){Vue.component('icon',VueAwesome);let a=[{key:'field0',label:i18n.t('table.field.default.none'),thClass:tableWidthDefaultSize,tdClass:tableColumnClass,formatter:'contentFormatter'},{key:'field1',label:i18n.t('table.field.default.main'),thClass:tableWidthDefaultSize,tdClass:tableColumnClass,formatter:'contentFormatter',avatar:{src:userImageDefaultSrc},winCount:0},{key:'field2',label:i18n.t('table.field.default.opponent'),thClass:tableWidthDefaultSize,tdClass:tableColumnClass,formatter:'contentFormatter',avatar:{src:userImageDefaultSrc},winCount:0}];const b=[{field0:{content:i18n.t('table.row.default.new'),win:!1}}];navbar=new Vue({el:'#wiw-main-navbar',i18n,data:{themeVariant:themeVariant,themeObjectArray:themeObjectArray,langObjectArray:langObjectArray,preview:!1},methods:{previewResultModal:function(){this.preview=!0,hiddenVue.$refs.hiddenComponent.$refs.previewResultModal.show()},tableConfigModal:function(){hiddenVue.$refs.hiddenComponent.$refs.tableModal.show()},winnerIconModal:function(){hiddenVue.$refs.hiddenComponent.$refs.winnerIconModal.show()},aboutModal:function(){hiddenVue.$refs.hiddenComponent.$refs.aboutModal.show()},themeChange:function(c){themeVariant.navbar=themeObjectArray[c].variant.navbar,themeVariant.navbarType=themeObjectArray[c].variant.navbarType,themeVariant.normal=themeObjectArray[c].variant.normal,themeVariant.outline=themeObjectArray[c].variant.outline},langChange:function(c){let d=langObjectArray[c].key;i18n.locale=d,hiddenVue.$refs.hiddenComponent.tableWidthSizeOption[0].text=i18n.t('modal.tableConfig.tableWidth.size.lg'),hiddenVue.$refs.hiddenComponent.tableWidthSizeOption[1].text=i18n.t('modal.tableConfig.tableWidth.size.def'),hiddenVue.$refs.hiddenComponent.tableWidthSizeOption[2].text=i18n.t('modal.tableConfig.tableWidth.size.sm'),hiddenVue.$refs.hiddenComponent.winnerIconOption[0].text=i18n.t('modal.winnerIconConfig.options.default'),hiddenVue.$refs.hiddenComponent.winnerIconOption[1].text=i18n.t('modal.winnerIconConfig.options.upload'),hiddenVue.$refs.hiddenComponent.winnerIconOption[2].text=i18n.t('modal.winnerIconConfig.options.url'),document.title=i18n.t('nav.title')}},watch:{preview:function(c){if(!1!=c){mainLayoutVue.preview=!0;let d=document.getElementById('wiw-main-layout');html2canvas(d).then(function(e){let f=document.getElementById('wiw-preview-wrapper');f.innerHTML='',f.appendChild(e),mainLayoutVue.preview=!1,navbar.preview=!1})}}}}),mainLayoutVue=new Vue({el:'#wiw-main-layout',i18n,data:{wiwAuthor:wiwAuthor,themeVariant:themeVariant,fields:a,items:b,avatarUploadIndex:0,winnerIconSrc:winnerImageDefaultSrc,winIconSrc:winnerImageDefaultSrc,alertEditing:!1,noteEditing:!1,preview:!1},methods:{contentFormatter:function(c){return'undefined'==typeof c||'undefined'==typeof c.content?'':c.content},titleFocus:function(){hiddenVue.modal=!0,this.alertEditing=!0},titleBlur:function(){hiddenVue.modal=!1,this.alertEditing=!1},noteFocus:function(){hiddenVue.modal=!0,this.noteEditing=!0},noteBlur:function(){hiddenVue.modal=!1,this.noteEditing=!1}},components:{'wiw-field-avatar':httpVueLoader('views/components/wiw-field-avatar.vue'),'wiw-field-delete':httpVueLoader('views/components/wiw-field-delete.vue'),'wiw-field-content':httpVueLoader('views/components/wiw-field-content.vue'),'wiw-item-win':httpVueLoader('views/components/wiw-item-win.vue')}}),new Vue({el:'#wiw-footer-navbar',i18n,data:{themeVariant:themeVariant,competitorIndex:2},methods:{addCompetition:function(){var d={field0:{content:i18n.t('table.row.default.new'),win:!1}};mainLayoutVue.items.push(d)},addCompetitor:function(){this.competitorIndex++;var d={key:'field'+this.competitorIndex,label:i18n.t('table.field.default.challenger'),thClass:tableWidthDefaultSize,tdClass:tableColumnClass,formatter:'contentFormatter',avatar:{src:userImageDefaultSrc},winCount:0};mainLayoutVue.fields.push(d)}}}),hiddenVue=new Vue({el:'#wiw-hidden-component',i18n,data:{wiwAuthor:wiwAuthor,themeVariant:themeVariant,fields:mainLayoutVue.fields,modal:modalActive},components:{'wiw-hidden-component':httpVueLoader('views/components/wiw-hidden-component.vue')}})}function initApp(){let a='en_US',b='en',c=navigator.language||navigator.userLanguage;'zh-TW'===c?(a='zh_TW',b='zh-tw'):'zh-CN'===c&&(a='zh_CN',b='zh-cn'),i18n.locale=a,document.title=i18n.t('nav.title'),addLoadEvent(function(){outdatedBrowser({bgColor:'#2b9e8f',color:'#ffffff',lowerThan:'Edge',languagePath:`public/lib/outdatedbrowser/lang/${b}.html`})}),window.onbeforeunload=wiwConfirmExit}function wiwConfirmExit(){return i18n.t('exit.confirm')}function addLoadEvent(a){var b=window.onload;window.onload='function'==typeof window.onload?function(){b&&b(),a()}:a}